# Контроллеры

REST-контроллеры для банковской системы.

## Созданные контроллеры:

### 1. AuthController
- **Путь:** `/api/auth`
- **Описание:** Аутентификация и авторизация пользователей
- **Методы:** POST `/login`, POST `/logout`

### 2. UserController
- **Путь:** `/api/users`
- **Описание:** Управление пользователями системы
- **Методы:**
  - GET `/` - получить всех пользователей (только ADMIN)
  - GET `/{id}` - получить пользователя по ID
  - GET `/username/{username}` - получить пользователя по username
  - POST `/` - создать нового пользователя (только ADMIN)
  - PUT `/{id}` - обновить пользователя
  - DELETE `/{id}` - удалить пользователя (только ADMIN)
  - POST `/{id}/activate` - активировать пользователя (только ADMIN)
  - POST `/{id}/deactivate` - деактивировать пользователя (только ADMIN)
  - GET `/search` - поиск пользователей по имени или роли

### 3. CardController
- **Путь:** `/api/cards`
- **Описание:** Управление банковскими картами
- **Методы:**
  - GET `/{id}` - получить карту по ID
  - GET `/number/{cardNumber}` - получить карту по номеру
  - POST `/` - создать новую карту
  - PUT `/{id}` - обновить карту
  - DELETE `/{id}` - удалить карту (только ADMIN)
  - POST `/{id}/activate` - активировать карту
  - POST `/{id}/deactivate` - деактивировать карту
  - POST `/{id}/deposit` - пополнить баланс карты
  - POST `/{id}/withdraw` - списать средства с карты
  - GET `/user/{userId}` - получить карты пользователя
  - GET `/active/user/{userId}` - получить активные карты пользователя
  - GET `/type/{cardType}` - получить карты по типу (только ADMIN)
  - GET `/search` - поиск карт по критериям (только ADMIN)

### 4. TransactionController
- **Путь:** `/api/transactions`
- **Описание:** Управление банковскими транзакциями
- **Методы:**
  - POST `/transfer` - перевод между картами
  - POST `/payment` - выполнить платеж
  - POST `/{id}/confirm` - подтвердить транзакцию (только ADMIN)
  - POST `/{id}/cancel` - отменить транзакцию
  - POST `/refund/{originalTransactionId}` - выполнить возврат средств
  - GET `/{id}` - получить транзакцию по ID
  - GET `/card/{cardId}` - получить транзакции по карте
  - GET `/card/{cardId}/recent` - получить последние транзакции по карте
  - GET `/user/{userId}` - получить транзакции пользователя
  - GET `/status/{status}` - получить транзакции по статусу (только ADMIN)
  - GET `/type/{type}` - получить транзакции по типу (только ADMIN)
  - GET `/date-range` - получить транзакции за период (только ADMIN)
  - GET `/failed-recent` - получить неудачные транзакции (только ADMIN)
  - GET `/statistics/total/{type}` - получить общую сумму по типу (только ADMIN)
  - GET `/between-cards` - получить транзакции между картами

## Общие характеристики:
- Все контроллеры используют `@RestController`
- Защищены аутентификацией через `@SecurityRequirement(name = "bearerAuth")`
- Используют валидацию через `@Validated` и аннотации валидации в DTO
- Возвращают правильные HTTP статусы (200, 201, 400, 404, 403)
- Документированы через Swagger аннотации
- Используют авторизацию через `@PreAuthorize` с ролевыми проверками
